<?xml version = "1.0" encoding = "utf-8" ?> 
<component name = "SetupServer" extends = "Scene" initialFocus = "getServerName" >
  <script type = "text/brightscript" >
    <![CDATA[
    sub init()
      m.top.backgroundURI = "pkg:/images/rsgde_bg_hd.jpg"

      m.kbd = m.top.findNode("getServerName")

      rect = m.kbd.boundingRect()
      centerx = (1280 - rect.width) / 2
      centery = (720 - rect.height) / 2
      m.kbd.translation = [ centerx, centery ]

      m.finishedButton = m.top.findNode("finished")
      rect = m.finishedButton.boundingRect()
      m.finishedButton.translation = [1280 - rect.width, 720 - rect.height]
      m.finishedButton.ObserveField("buttonSelected", "onFinishPressed")

      m.top.setFocus(true)
      print "Running fucking server setup dialog"
    end sub

    sub onFinishedPressed()
          print "finish button pressed"
          print "server name is "; m.kbd.text
    end sub

    function onKeyEvent(key as String, press as Boolean) as Boolean
        handled = false

        print key
        print m.finishedButton.hasFocus()
        print press
        print m.kbd.text
        print

        if press
            if key = "down" and not m.finishedButton.hasFocus()
                m.finishedButton.setFocus(true)
                handled = true
            else if key = "up" and not m.kbd.hasFocus()
                m.kbd.setFocus(true)
                handled = true
            else if key = "OK" and m.finishedButton.hasFocus()
                print "OK was pressed on finished"
                print "server name is "; m.kbd.text
            end if
        end if

        return handled
    end function
    ]]>
  </script>

  <children >
      <Keyboard id = "getServerName" />
      <Button id="finished" text="Finished" showFocusFootprint="true" />
  </children>
</component>
